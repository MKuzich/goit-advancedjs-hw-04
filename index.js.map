{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '27957885-8dff7fee3c243073fce7c6825';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst fetchImages = (query, page) => {\n  return axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n};\n\nexport default fetchImages;\n","const gallery = document.querySelector('.gallery');\n\nconst createImageCard = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => `\n<li>\n  <a href=\"${largeImageURL}\">\n    <div class=\"image-container\">\n      <img class=\"image-preview\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </div>\n    <div class=\"card-description\">\n      <span class=\"attribute\"><span>Likes</span> ${likes}</span>\n      <span class=\"attribute\"><span>Views</span> ${views}</span>\n      <span class=\"attribute\"><span>Comments</span> ${comments}</span>\n      <span class=\"attribute\"><span>Downloads</span> ${downloads}</span>\n    </div>\n  </a>\n</li>\n  `;\n\nexport const renderImages = images => {\n  const cards = images.map(createImageCard).join('');\n\n  gallery.innerHTML = `<ul class=\"gallery-list\">${cards}</ul>`;\n};\n\nexport const addImages = images => {\n  const cards = images.map(createImageCard).join('');\n  const galleryList = document.querySelector('.gallery-list');\n\n  galleryList.insertAdjacentHTML('beforeend', cards);\n};\n\nexport const renderError = () => {\n  gallery.innerHTML = '';\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport fetchImages from './js/pixabay-api';\nimport { renderImages, addImages, renderError } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.8,\n  captions: true,\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionType: 'attr',\n  captionsData: 'alt',\n});\n\nlet currPage = 1;\nlet query = '';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nconst submitHandler = async e => {\n  e.preventDefault();\n\n  const form = e.target;\n  const sumbittedQuery = form.elements.query.value.trim();\n\n  if (!sumbittedQuery) {\n    return;\n  } else if (query === sumbittedQuery) {\n    page += 1;\n  } else {\n    query = sumbittedQuery;\n    currPage = 1;\n  }\n\n  form.reset();\n  loader.classList.remove('hide');\n\n  try {\n    const { data } = await fetchImages(query, currPage);\n\n    if (data.total === 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    } else {\n      renderImages(data.hits);\n    }\n\n    if (data.totalHits <= 15 * currPage) {\n      loadMoreBtn.classList.add('hide');\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.classList.remove('hide');\n    }\n\n    simpleGallery.refresh();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n    renderError();\n  }\n\n  loader.classList.add('hide');\n};\n\nsearchForm.addEventListener('submit', submitHandler);\n\nconst loadMoreHandler = async () => {\n  currPage += 1;\n  loadMoreBtn.classList.add('hide');\n  loader.classList.remove('hide');\n\n  try {\n    const { data } = await fetchImages(query, currPage);\n\n    addImages(data.hits);\n    if (data.totalHits <= 15 * currPage) {\n      loadMoreBtn.classList.add('hide');\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.classList.remove('hide');\n    }\n    const card = document.querySelector('.gallery-list a');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n    simpleGallery.refresh();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n    renderError();\n  }\n\n  loader.classList.add('hide');\n};\n\nloadMoreBtn.addEventListener('click', loadMoreHandler);\n"],"names":["API_KEY","axios","fetchImages","query","page","gallery","createImageCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImages","images","cards","addImages","renderError","simpleGallery","SimpleLightbox","currPage","searchForm","loadMoreBtn","loader","submitHandler","e","form","sumbittedQuery","data","iziToast","error","loadMoreHandler","cardHeight"],"mappings":"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"}